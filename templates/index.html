<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Flask App</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <main class="app">
        <header class="app-header">
            <div class="app-title">
                <p class="app-greeting" id="userGreeting"></p>
            </div>
            <button class="link-button link-button--hidden" id="logoutButton">Log out</button>
        </header>

        <section id="authView" class="page page--active">
            <div class="card">
                <h2 class="card__title">Sign in</h2>
                <label class="field">
                    <span class="field__label">Username</span>
                    <input type="text" id="loginUsername" autocomplete="username" placeholder="Enter username">
                </label>
                <label class="field">
                    <span class="field__label">Password</span>
                    <input type="password" id="loginPassword" autocomplete="current-password" placeholder="Enter password">
                </label>
                <p class="form-status" id="loginStatus"></p>
                <button class="btn btn--primary" id="loginButton">Log in</button>
            </div>

            <div class="card">
                <h2 class="card__title">Create account</h2>
                <label class="field">
                    <span class="field__label">Username</span>
                    <input type="text" id="registerUsername" autocomplete="username" placeholder="Choose a username">
                </label>
                <label class="field">
                    <span class="field__label">Password</span>
                    <input type="password" id="registerPassword" autocomplete="new-password" placeholder="Choose a password">
                </label>
                <button class="btn btn--secondary" id="registerButton">Register</button>
                <p class="form-status" id="registerStatus"></p>
            </div>
        </section>

        <section id="dictionaryView" class="page">
            <div class="card">
                <label class="field">
                    <span class="field__label">Translation direction</span>
                    <select id="translationDirection">
                        <option value="en-da" selected>English â†’ Danish</option>
                        <option value="da-en">Danish â†’ English</option>
                    </select>
                </label>

                <label class="field">
                    <span class="field__label" id="englishLabel">English (source)</span>
                    <textarea id="englishInput" placeholder="Write a phrase in English"></textarea>
                </label>

                <label class="field">
                    <span class="field__label" id="danishLabel">Danish (translation)</span>
                    <textarea id="danishInput" placeholder="Add your Danish translation"></textarea>
                </label>

                <button class="btn btn--primary" id="translateButton">Suggest translation</button>

                <div class="card card--result">
                    <span class="card__subtitle">Suggested translation</span>
                    <p id="translationResult">...</p>
                </div>

                <button class="btn btn--secondary" id="saveButton">Save</button>
            </div>

            <section id="entriesSection" class="card">
                <h2 class="card__title">Saved Words</h2>
                <ul id="entriesList">
                    <li>Loading saved entries...</li>
                </ul>
            </section>
        </section>

        <section id="practiseView" class="page">
            <div class="card">
                <h2 class="card__title">Practise</h2>
                <div class="practise__section" id="practiseAiSection">
                    <p class="practise__empty-message" id="practiseAiEmptyMessage">
                        Save at least one entry to unlock AI practise.
                    </p>
                    <div class="practise__body practise__body--hidden" id="practiseAiBody">
                        <div class="practise__flashcards" id="practiseFlashcards">
                            <p class="practise__prompt" id="practiseAiPrompt">Loadingâ€¦</p>
                            <div class="practise__options practise__options--cards" id="practiseAiOptions"></div>
                            <p class="practise__feedback" id="practiseAiFeedback"></p>
                        </div>
                        <div class="practise__cloze" id="practiseClozeBlock">
                            <p class="practise__prompt" id="practiseClozePrompt">
                                Fill in the blank with the correct Danish word or phrase.
                            </p>
                            <div class="practise__hint-row">
                                <p class="practise__hint practise__hint--hidden" id="practiseClozeHint"></p>
                                <button class="btn btn--ghost" id="practiseClozeShowHint">Show hint</button>
                            </div>
                            <div class="practise__input-row">
                                <input type="text" id="practiseClozeInput" placeholder="Type the Danish word" />
                                <button class="btn btn--primary" id="practiseClozeCheck">Check</button>
                            </div>
                            <button class="btn btn--secondary practise__giveup" id="practiseClozeGiveUp">I give up</button>
                            <p class="practise__feedback" id="practiseClozeFeedback"></p>
                            <div class="practise__wordbar is-hidden" id="practiseClozeWordBar">
                                <p class="practise__wordbar-label">Tap any word to add it:</p>
                                <div class="practise__words" id="practiseClozeWords"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <div class="modal modal--hidden" id="entryModal" role="dialog" aria-modal="true">
        <div class="modal__dialog">
            <div class="modal__entry">
                <p class="modal__line modal__line--danish">
                    <button class="icon-button modal__audio is-hidden" id="entryModalPronounceButton" aria-label="Play pronunciation">
                        ðŸ”Š
                    </button>
                    <span id="entryModalDanish"></span>
                </p>
                <p class="modal__line" id="entryModalEnglish"></p>
            </div>
            <div class="modal__example">
                <button class="btn btn--secondary" id="entryModalExampleButton">Generate example</button>
                <div class="modal__example-line">
                    <button class="icon-button modal__audio is-hidden" id="entryModalExamplePronounceButton" aria-label="Play example pronunciation">
                        ðŸ”Š
                    </button>
                    <button class="icon-button modal__refresh is-hidden" id="entryModalExampleRefreshButton" aria-label="Regenerate example">
                        â†»
                    </button>
                    <p class="modal__example-text modal__example-text--danish" id="entryModalExampleDanish"></p>
                </div>
                <p class="modal__example-text" id="entryModalExampleEnglish"></p>
            </div>
            <div class="modal__footer">
                <button class="modal__close" id="entryModalClose">Close</button>
            </div>
        </div>
    </div>

    <div class="modal modal--hidden" id="addWordModal" role="dialog" aria-modal="true">
        <div class="modal__dialog modal__dialog--form">
            <h3 class="modal__title">Add to dictionary</h3>
            <div class="add-modal__form">
                <label class="field">
                    <span class="field__label">English</span>
                    <input type="text" id="addWordEnglish" placeholder="Write a phrase in English">
                </label>
                <label class="field">
                    <span class="field__label">Danish</span>
                    <input type="text" id="addWordDanish" placeholder="Add your Danish translation">
                </label>
                <p class="form-status" id="addWordStatus"></p>
                <button class="btn btn--secondary" id="addWordTranslate">Suggest translation</button>
            </div>
            <div class="modal__footer add-modal__actions">
                <button class="modal__close" id="addWordCancel">Cancel</button>
                <button class="btn btn--primary" id="addWordSave">Save</button>
            </div>
        </div>
    </div>

    <nav class="tab-bar tab-bar--hidden" id="tabBar">
        <button class="tab tab--active" data-view="dictionary">
            <span>Dictionary</span>
        </button>
        <button class="tab" data-view="practise">
            <span>Practise</span>
        </button>
    </nav>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
