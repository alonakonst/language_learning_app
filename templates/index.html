<!DOCTYPE html>
<!-- Main UI for the app with auth, dictionary, practise, and progress views. -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <title>My Flask App</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <main class="app">
        <header class="app-header">
            <div class="app-title">
                <p class="app-greeting" id="userGreeting"></p>
            </div>
            <button class="link-button link-button--hidden" id="logoutButton">Log out</button>
        </header>

        <section id="authView" class="page page--active">
            <div class="card">
                <h2 class="card__title">Sign in</h2>
                <label class="field">
                    <span class="field__label">Username</span>
                    <input type="text" id="loginUsername" autocomplete="username" placeholder="Enter username" value="tester">
                </label>
                <label class="field">
                    <span class="field__label">Password</span>
                    <input type="password" id="loginPassword" autocomplete="current-password" placeholder="Enter password" value="1234">
                </label>
                <p class="form-status" id="loginStatus"></p>
                <button class="btn btn--primary" id="loginButton">Log in</button>
            </div>

            <p class="auth-divider">or</p>

            <div class="card">
                <h2 class="card__title">Create account</h2>
                <label class="field">
                    <span class="field__label">Username</span>
                    <input type="text" id="registerUsername" autocomplete="username" placeholder="Choose a username">
                </label>
                <label class="field">
                    <span class="field__label">Password</span>
                    <input type="password" id="registerPassword" autocomplete="new-password" placeholder="Choose a password">
                </label>
                <button class="btn btn--secondary" id="registerButton">Register</button>
                <p class="form-status" id="registerStatus"></p>
            </div>
        </section>

        <section id="dictionaryView" class="page">
            <div class="card">
                <label class="field">
                    <span class="field__label">English</span>
                    <textarea id="englishInput" placeholder="Write a phrase in English"></textarea>
                </label>
                <p class="translation-suggestion translation-suggestion--hidden" id="translationResultEnglish"></p>

                <label class="field">
                    <span class="field__label">üá©üá∞ Danish</span>
                    <textarea id="danishInput" placeholder="Write a phrase in Danish"></textarea>
                </label>
                <p class="translation-suggestion translation-suggestion--hidden" id="translationResultDanish"></p>

                <div class="translate-actions">
                    <button class="btn btn--secondary translate-actions__translate" id="translateButton">
                        Suggest translation to Danish
                    </button>
                    <button class="translate-actions__toggle" id="toggleDirectionButton" aria-label="Swap translation direction">
                        ‚áÑ
                    </button>
                </div>

                <button class="btn btn--primary" id="saveButton">Save</button>
            </div>

            <section id="entriesSection" class="card">
                <h2 class="card__title">Saved Words</h2>
                <ul id="entriesList">
                    <li>Loading saved entries...</li>
                </ul>
            </section>
        </section>

        <section id="practiseView" class="page">
            <div class="card">
                <h2 class="card__title">Practise</h2>
                <div class="practise__mode-page" id="practiseModePage">
                    <p class="practise__mode-desc">Choose what to practise.</p>
                    <div class="practise__mode-stack" id="practiseModeSelector">
                        <button class="practise__mode-card" data-mode="flash_en">
                            Flashcards: English prompts
                            <span>See Danish answers for your English words.</span>
                        </button>
                        <button class="practise__mode-card" data-mode="flash_da">
                            Flashcards: Danish prompts
                            <span>See English answers for your Danish words.</span>
                        </button>
                        <button class="practise__mode-card" data-mode="cloze">
                            Contextual sentences
                            <span>Fill in blanks inside Danish sentences.</span>
                        </button>
                    </div>
                </div>
                <div class="practise__content-page is-hidden" id="practiseContentPage">
                    <div class="practise__content-head">
                        <button class="practise__back" id="practiseBackButton">‚Üê Back</button>
                        <p class="practise__mode-label" id="practiseModeLabel"></p>
                    </div>
                    <div class="practise__section" id="practiseAiSection">
                        <p class="practise__empty-message" id="practiseAiEmptyMessage">
                            Save at least one entry to unlock AI practise.
                        </p>
                        <div class="practise__body practise__body--hidden" id="practiseAiBody">
                            <div class="practise__flashcards" id="practiseFlashcards">
                                <p class="practise__prompt" id="practiseAiPrompt">Loading‚Ä¶</p>
                                <div class="practise__options practise__options--cards" id="practiseAiOptions"></div>
                                <p class="practise__feedback" id="practiseAiFeedback"></p>
                            </div>
                            <div class="practise__cloze" id="practiseClozeBlock">
                                <p class="practise__prompt" id="practiseClozePrompt">
                                    Fill in the blank with the correct Danish word or phrase.
                                </p>
                                <div class="practise__hint-row">
                                    <p class="practise__hint practise__hint--hidden" id="practiseClozeHint"></p>
                                    <button class="btn btn--ghost" id="practiseClozeShowHint">Show hint</button>
                                </div>
                                <div class="practise__input-row">
                                    <input type="text" id="practiseClozeInput" placeholder="Type the Danish word" />
                                    <button class="btn btn--primary" id="practiseClozeCheck">Check</button>
                                </div>
                                <button class="btn btn--secondary practise__giveup" id="practiseClozeGiveUp">I give up</button>
                                <p class="practise__feedback" id="practiseClozeFeedback"></p>
                                <div class="practise__wordbar is-hidden" id="practiseClozeWordBar">
                                    <p class="practise__wordbar-label">Tap any word to add it:</p>
                                    <div class="practise__words" id="practiseClozeWords"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="progressView" class="page">
            <div class="card">
                <div class="progress__head">
                    <h2 class="card__title">Progress</h2>
                    <p class="progress__range" id="progressRange">Last 7 days</p>
                </div>
                <div class="progress__block">
                    <div class="progress__block-head">
                        <p class="progress__block-title">Words added</p>
                        <p class="progress__summary" id="progressSummaryWords">
                            Daily adds over the last week.
                        </p>
                    </div>
                    <div class="progress__chart" id="progressChartWords"></div>
                    <p class="progress__empty" id="progressEmptyWords">Add a word to see your graph.</p>
                    <div class="progress__stats">
                        <div class="progress__stat">
                            <span class="progress__stat-label">Total saved</span>
                            <span class="progress__stat-value" id="progressTotalWords">0</span>
                        </div>
                        <div class="progress__stat">
                            <span class="progress__stat-label">Best day</span>
                            <span class="progress__stat-value" id="progressBestDayWords">‚Äì</span>
                        </div>
                    </div>
                </div>
                <div class="progress__block">
                    <div class="progress__block-head">
                        <p class="progress__block-title">Exercises completed</p>
                        <p class="progress__summary" id="progressSummaryExercises">
                            Completed practise across modes.
                        </p>
                    </div>
                    <div class="progress__chart" id="progressChartExercises"></div>
                    <p class="progress__empty" id="progressEmptyExercises">Complete an exercise to see your graph.</p>
                    <div class="progress__stats">
                        <div class="progress__stat">
                            <span class="progress__stat-label">Total completed</span>
                            <span class="progress__stat-value" id="progressTotalExercises">0</span>
                        </div>
                        <div class="progress__stat">
                            <span class="progress__stat-label">Best day</span>
                            <span class="progress__stat-value" id="progressBestDayExercises">‚Äì</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <div class="modal modal--hidden" id="entryModal" role="dialog" aria-modal="true">
        <div class="modal__dialog">
            <div class="modal__entry">
                <p class="modal__line modal__line--danish">
                    <button class="icon-button modal__audio is-hidden" id="entryModalPronounceButton" aria-label="Play pronunciation">
                        üîä
                    </button>
                    <span id="entryModalDanish"></span>
                </p>
                <p class="modal__line" id="entryModalEnglish"></p>
            </div>
            <div class="modal__example">
                <div class="modal__example-actions">
                    <button class="btn btn--secondary" id="entryModalExampleButton">Generate example</button>
                </div>
                <div class="modal__examples" id="entryModalExamples">
                    <p class="modal__example-empty">No examples yet.</p>
                </div>
                <div class="modal__example-actions modal__example-actions--footer">
                    <button class="btn btn--ghost is-hidden" id="entryModalExampleAddButton">Add another</button>
                </div>
            </div>
            <div class="modal__footer">
                <button class="modal__close" id="entryModalClose">Close</button>
            </div>
        </div>
    </div>

    <div class="modal modal--hidden" id="addWordModal" role="dialog" aria-modal="true">
        <div class="modal__dialog modal__dialog--form">
            <h3 class="modal__title">Add to dictionary</h3>
            <div class="add-modal__form">
                <label class="field">
                    <span class="field__label">English</span>
                    <input type="text" id="addWordEnglish" placeholder="Write a phrase in English">
                </label>
                <label class="field">
                    <span class="field__label">Danish</span>
                    <input type="text" id="addWordDanish" placeholder="Add your Danish translation">
                </label>
                <p class="form-status" id="addWordStatus"></p>
                <button class="btn btn--secondary" id="addWordTranslate">Suggest translation</button>
            </div>
            <div class="modal__footer add-modal__actions">
                <button class="modal__close" id="addWordCancel">Cancel</button>
                <button class="btn btn--primary" id="addWordSave">Save</button>
            </div>
        </div>
    </div>

    <nav class="tab-bar tab-bar--hidden" id="tabBar">
        <button class="tab tab--active" data-view="dictionary">
            <span>Dictionary</span>
        </button>
        <button class="tab" data-view="practise">
            <span>Practise</span>
        </button>
        <button class="tab" data-view="progress">
            <span>Progress</span>
        </button>
    </nav>

    <script src="{{ url_for('static', filename='script.js', v='progress3') }}"></script>
</body>
</html>
